<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Details</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300..700&family=Red+Hat+Display:ital,wght@0,300..900;1,300..900&family=Rufina:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
<div class="main">
    <div id="content">
        <div id="hero">
            <div class="wrap"></div>
            <div class="menubuttons">
                <a href="main.html"><h1>Home</h1></a>
                <a href="kontakt.html"><h1>Contact</h1></a>
                <a href="policy.html"><h1>Policy</h1></a>
            </div>
        </div>

        <div id="central">
            <div class="focus">
                <div class="focus-overlay"></div>
                <div class="movie-info" id="movieInfo">
                    <!-- Dynamic content will be inserted here -->
                </div>  
            </div>

            <div class="movie-description" id="movieDescription">
                <!-- Dynamic description will be inserted here -->
            </div>

            <div class="stats">
                <div class="statsinfo" id="statsInfo">
                    <!-- Dynamic stats will be inserted here -->
                </div>
                <canvas id="barChart"></canvas>
            </div>
        </div>
        
        <footer>
            <div class="footer-description">
                 <h3>Social Media</h3>
                     <div class="certific">
                        <a href="https://www.instagram.com"> <img src="pics/instagram.png" alt="instagram"></a>
                        <a href="https://x.com"> <img src="pics/twitter.webp" alt="twitter"></a>
                        <a href="https://www.facebook.com"> <img src="pics/facebook.png" alt="facebook"></a>
                    </div>
            </div>
            <div class="footer-contact">
                <h3>Contact Us</h3>
                <a href="kontakt.html" class="contact-button">Here!</a>
            </div>
            <div class="footer-policy">
                <a href="policy.html">Integrtity policy</a>
             </div>  
             <div class="copyright"><h4>â’¸ 2025 Green Statistic AB. All rights reserved.</h4></div>  
        </footer> 
    </div> 
</div>
<script>
// Load movie data from storage
document.addEventListener('DOMContentLoaded', () => {
    const movieData = JSON.parse(sessionStorage.getItem('currentMovie'));
    
    if (!movieData) {
        window.location.href = 'index.html';
        return;
    }

    // Update movie info section
    const movieInfo = document.getElementById('movieInfo');
    movieInfo.innerHTML = `
        <img class="movie-card" src="pics/${movieData.id}.png" alt="${movieData.title}">
        <div class="infocontainer">
            <h2>${movieData.title} (${movieData.year})</h2>
            <p>Rating: ${movieData.rating}/10</p>
            ${movieData.bechdel ? `<p>Bechdel Test: Passed</p>` : `<p>Bechdel Test: Not Passed</p>`}
        </div>
    `;

    // Update description
    document.getElementById('movieDescription').innerHTML = `
        <p>Detailed information about ${movieData.title}. Lorem ipsum dolor sit amet consectetur 
        adipisicing elit. Magnam veritatis enim optio blanditiis unde repudiandae 
        quidem dicta consequuntur animi cupiditate dolores reiciendis esse beatae minima quasi.</p>
    `;

    // Update stats info
    document.getElementById('statsInfo').innerHTML = `
        <p>Statistics for ${movieData.title}. Lorem ipsum dolor sit amet, consectetur 
        adipisicing elit. Adipisci nulla ullam, perspiciatis non, necessitatibus 
        deserunt ab excepturi laborum nisi.</p>
    `;

    // Update chart with movie-specific data
    updateChart(movieData);
});

function updateChart(movie) {
    const ctx = document.getElementById('barChart').getContext('2d');
    
    // Example dynamic data based on movie
    const ratingPercentage = movie.rating * 10;
    const bechdelScore = movie.bechdel ? 100 : 30;
    
    new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['Rating', 'Bechdel Score', 'Popularity'],
            datasets: [{
                label: movie.title,
                data: [ratingPercentage, bechdelScore, 75],
                backgroundColor: [
                    'rgba(91, 169, 109, 0.6)',
                    'rgba(162, 206, 201, 0.6)',
                    'rgba(133, 172, 124, 0.6)'
                ]
            }]
        },
        options: {
            responsive: true,
            scales: {
                y: {
                    beginAtZero: true,
                    max: 100,
                    ticks: { color: 'white' },
                    grid: { color: 'rgba(255,255,255,0.2)' }
                },
                x: {
                    ticks: { color: 'white' },
                    grid: { color: 'rgba(255,255,255,0.2)' }
                }
            },
            plugins: {
                legend: {
                    labels: { color: 'white' }
                }
            }
        }
    });
}
</script>
</body>
</html>