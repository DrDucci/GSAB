<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Details</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300..700&family=Red+Hat+Display:ital,wght@0,300..900;1,300..900&family=Rufina:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
<div class="main">
    <div id="content">
        <div id="hero" style="background-image: url('pics/greenbubble.jpg');">
            <div class="shader">
                <a href="main.html"><h1>Green Statistic AB</h1></a>
                <a href="main.html"><h4>The green way forward</h4></a>
            </div>  
        </div>

        <div id="central">
            <div class="focus">
                <div class="movie-info" id="movieInfo">
                    <!-- Dynamic content will be inserted here -->
                </div>  
            </div>

            <div class="movie-stats">
                <div class="statsinfo" id="statsInfo">
                    <h2>How do we get these stats?</h2>
                    <ul>
                        <li>The IMDB score is calculated by:</li>
                        <i>IMDB score * 10</i><hr>

                        <li>The bechdel test is determined by yes or no</li>
                        <i>Bechdel score is either 0 or 100</i><hr>

                        <li>And the top 250 IMDB is calculated through</li>
                        <i>100 - ((movie ranking / 250) * 100); Convert to inverse percentage</i><hr>

                        <li>All stats are sourced from our database</li>
                        <i>With data from our two sources bechdel, and IMDB</i>
                    </ul>
                </div>
                <div id="barChartContainer" class="bar-chart"></div>
            </div>
        </div>
        
        <footer>
            <div class="footer-description">
                 <h3>Social Media</h3>
                     <div class="certific">
                        <a href="https://www.instagram.com"> <img src="pics/instagram.png" alt="instagram"></a>
                        <a href="https://x.com"> <img src="pics/twitter.webp" alt="twitter"></a>
                        <a href="https://www.facebook.com"> <img src="pics/facebook.png" alt="facebook"></a>
                    </div>
            </div>
            <div class="footer-contact">
                <h3>Contact Us</h3>
                <a href="kontakt.html" class="contact-button">Here!</a>
            </div>
            <div class="footer-policy">
                <a href="policy.html">Integrtity policy</a>
             </div>  
             <div class="copyright"><h4>â’¸ 2025 Green Statistic AB. All rights reserved.</h4></div>  
        </footer> 
    </div> 
</div>
<script>
// Load movie data from storage
document.addEventListener('DOMContentLoaded', () => {
    const movieData = JSON.parse(sessionStorage.getItem('currentMovie'));
    
    if (!movieData) {
        window.location.href = 'index.html';
        return;
    }

    // Update movie info section
    const movieInfo = document.getElementById('movieInfo');
    movieInfo.innerHTML = `
        <div class="infocontainer">
            <h2>${movieData.title} (${movieData.year})</h2>
            <p>Rating: ${movieData.rating}/10</p>
            ${movieData.bechdel ? `<p>Bechdel Test: Passed</p>` : `<p>Bechdel Test: Not Passed</p>`}
        </div>
    `;

    // Update chart with movie-specific data
    updateChart(movieData);
});

function updateChart(movie) {
    const container = document.getElementById('barChartContainer');
    container.innerHTML = ''; // Clear previous chart

    const ratingPercentage = movie.rating * 10;
    const bechdelScore = movie.bechdel ? 100 : 0;
    const top250Position = 100 - ((movie.id / 250) * 100);

    const stats = [
        { label: 'IMDB Rating', value: ratingPercentage, suffix: '%' },
        { label: 'Bechdel Test', value: bechdelScore, suffix: '' },
        { label: 'Top250 Rank', value: top250Position, suffix: '%' }
    ];

    stats.forEach(stat => {
        const bar = document.createElement('div');
        bar.className = 'bar';

        const label = document.createElement('div');
        label.className = 'bar-label';
        label.textContent = `${stat.label}: ${stat.value.toFixed(1)}${stat.suffix}`;
        bar.appendChild(label);

        const track = document.createElement('div');
        track.className = 'bar-track';

        const fill = document.createElement('div');
        fill.className = 'bar-fill';
        fill.style.width = `${stat.value}%`;
        fill.textContent = `${Math.round(stat.value)}${stat.suffix}`;
        
        track.appendChild(fill);
        bar.appendChild(track);
        container.appendChild(bar);
    });
}

</script>
</body>
</html>